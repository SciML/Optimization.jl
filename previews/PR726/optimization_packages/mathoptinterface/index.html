<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>MathOptInterface.jl · Optimization.jl</title><meta name="title" content="MathOptInterface.jl · Optimization.jl"/><meta property="og:title" content="MathOptInterface.jl · Optimization.jl"/><meta property="twitter:title" content="MathOptInterface.jl · Optimization.jl"/><meta name="description" content="Documentation for Optimization.jl."/><meta property="og:description" content="Documentation for Optimization.jl."/><meta property="twitter:description" content="Documentation for Optimization.jl."/><meta property="og:url" content="https://docs.sciml.ai/Optimization/stable/optimization_packages/mathoptinterface/"/><meta property="twitter:url" content="https://docs.sciml.ai/Optimization/stable/optimization_packages/mathoptinterface/"/><link rel="canonical" href="https://docs.sciml.ai/Optimization/stable/optimization_packages/mathoptinterface/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="Optimization.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Optimization.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Optimization.jl: A Unified Optimization Package</a></li><li><a class="tocitem" href="../../getting_started/">Getting Started with Optimization in Julia</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/minibatch/">Data Iterators and Minibatching</a></li><li><a class="tocitem" href="../../tutorials/symbolic/">Symbolic Problem Building with ModelingToolkit</a></li><li><a class="tocitem" href="../../tutorials/constraints/">Using Equality and Inequality Constraints</a></li><li><a class="tocitem" href="../../tutorials/linearandinteger/">Linear and Integer Optimization Problems</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/rosenbrock/">Solving the Rosenbrock Problem in &gt;10 Ways</a></li></ul></li><li><span class="tocitem">Basics</span><ul><li><a class="tocitem" href="../../API/optimization_problem/">Defining OptimizationProblems</a></li><li><a class="tocitem" href="../../API/optimization_function/">OptimizationFunction</a></li><li><a class="tocitem" href="../../API/ad/">Automatic Differentiation Construction Choice Recommendations</a></li><li><a class="tocitem" href="../../API/solve/">Common Solver Options (Solve Keyword Arguments)</a></li><li><a class="tocitem" href="../../API/optimization_solution/">Optimization Solutions</a></li><li><a class="tocitem" href="../../API/optimization_state/">OptimizationState</a></li><li><a class="tocitem" href="../../API/optimization_stats/">OptimizationStats</a></li><li><a class="tocitem" href="../../API/modelingtoolkit/">ModelingToolkit Integration</a></li><li><a class="tocitem" href="../../API/FAQ/">Frequently Asked Questions</a></li></ul></li><li><span class="tocitem">Optimizer Packages</span><ul><li><a class="tocitem" href="../blackboxoptim/">BlackBoxOptim.jl</a></li><li><a class="tocitem" href="../cmaevolutionstrategy/">CMAEvolutionStrategy.jl</a></li><li><a class="tocitem" href="../evolutionary/">Evolutionary.jl</a></li><li><a class="tocitem" href="../flux/">Flux.jl</a></li><li><a class="tocitem" href="../gcmaes/">GCMAES.jl</a></li><li class="is-active"><a class="tocitem" href>MathOptInterface.jl</a><ul class="internal"><li><a class="tocitem" href="#Installation:-OptimizationMOI.jl"><span>Installation: OptimizationMOI.jl</span></a></li><li><a class="tocitem" href="#Details"><span>Details</span></a></li><li><a class="tocitem" href="#Optimizers"><span>Optimizers</span></a></li></ul></li><li><a class="tocitem" href="../metaheuristics/">Metaheuristics.jl</a></li><li><a class="tocitem" href="../multistartoptimization/">MultistartOptimization.jl</a></li><li><a class="tocitem" href="../nlopt/">NLopt.jl</a></li><li><a class="tocitem" href="../nomad/">NOMAD.jl</a></li><li><a class="tocitem" href="../optim/">Optim.jl</a></li><li><a class="tocitem" href="../optimisers/">Optimisers.jl</a></li><li><a class="tocitem" href="../prima/">PRIMA.jl</a></li><li><a class="tocitem" href="../polyopt/">Polyalgorithms.jl</a></li><li><a class="tocitem" href="../quaddirect/">QuadDIRECT.jl</a></li><li><a class="tocitem" href="../speedmapping/">SpeedMapping.jl</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Optimizer Packages</a></li><li class="is-active"><a href>MathOptInterface.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>MathOptInterface.jl</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/SciML/Optimization.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/SciML/Optimization.jl/blob/master/docs/src/optimization_packages/mathoptinterface.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="MathOptInterface.jl"><a class="docs-heading-anchor" href="#MathOptInterface.jl">MathOptInterface.jl</a><a id="MathOptInterface.jl-1"></a><a class="docs-heading-anchor-permalink" href="#MathOptInterface.jl" title="Permalink"></a></h1><p><a href="https://github.com/jump-dev/MathOptInterface.jl">MathOptInterface</a> is a Julia abstraction layer to interface with a variety of mathematical optimization solvers.</p><h2 id="Installation:-OptimizationMOI.jl"><a class="docs-heading-anchor" href="#Installation:-OptimizationMOI.jl">Installation: OptimizationMOI.jl</a><a id="Installation:-OptimizationMOI.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Installation:-OptimizationMOI.jl" title="Permalink"></a></h2><p>To use this package, install the OptimizationMOI package:</p><pre><code class="language-julia hljs">import Pkg;
Pkg.add(&quot;OptimizationMOI&quot;);</code></pre><h2 id="Details"><a class="docs-heading-anchor" href="#Details">Details</a><a id="Details-1"></a><a class="docs-heading-anchor-permalink" href="#Details" title="Permalink"></a></h2><p>As of now, the <code>Optimization</code> interface to <code>MathOptInterface</code> implements only the <code>maxtime</code> common keyword argument.</p><p><code>OptimizationMOI</code> supports an argument <code>mtkize</code> which takes a boolean (default to <code>false</code>) that allows automatic symbolic expression generation, this allows using any AD backend with solvers or interfaces such as AmplNLWriter that require the expression graph of the objective and constraints. This always happens automatically in the case of the <code>AutoModelingToolkit</code> <code>adtype</code>.</p><p>An optimizer which supports the <code>MathOptInterface</code> API can be called directly if no optimizer options have to be defined.</p><p>For example, using the <a href="https://github.com/jump-dev/Ipopt.jl"><code>Ipopt.jl</code></a> optimizer:</p><pre><code class="language-julia hljs">using OptimizationMOI, Ipopt
sol = solve(prob, Ipopt.Optimizer())</code></pre><p>The optimizer options are handled in one of two ways. They can either be set via <code>OptimizationMOI.MOI.OptimizerWithAttributes()</code> or as keyword arguments to <code>solve</code>.</p><p>For example, using the <code>Ipopt.jl</code> optimizer:</p><pre><code class="language-julia hljs">using OptimizationMOI, Ipopt
opt = OptimizationMOI.MOI.OptimizerWithAttributes(Ipopt.Optimizer,
    &quot;option_name&quot; =&gt; option_value, ...)
sol = solve(prob, opt)

sol = solve(prob, Ipopt.Optimizer(); option_name = option_value, ...)</code></pre><h2 id="Optimizers"><a class="docs-heading-anchor" href="#Optimizers">Optimizers</a><a id="Optimizers-1"></a><a class="docs-heading-anchor-permalink" href="#Optimizers" title="Permalink"></a></h2><h4 id="Ipopt.jl-(MathOptInterface)"><a class="docs-heading-anchor" href="#Ipopt.jl-(MathOptInterface)">Ipopt.jl (MathOptInterface)</a><a id="Ipopt.jl-(MathOptInterface)-1"></a><a class="docs-heading-anchor-permalink" href="#Ipopt.jl-(MathOptInterface)" title="Permalink"></a></h4><ul><li><a href="https://github.com/jump-dev/Ipopt.jl"><code>Ipopt.Optimizer</code></a></li><li>The full list of optimizer options can be found in the <a href="https://coin-or.github.io/Ipopt/OPTIONS.html#OPTIONS_REF">Ipopt Documentation</a></li></ul><h4 id="KNITRO.jl-(MathOptInterface)"><a class="docs-heading-anchor" href="#KNITRO.jl-(MathOptInterface)">KNITRO.jl (MathOptInterface)</a><a id="KNITRO.jl-(MathOptInterface)-1"></a><a class="docs-heading-anchor-permalink" href="#KNITRO.jl-(MathOptInterface)" title="Permalink"></a></h4><ul><li><a href="https://github.com/jump-dev/KNITRO.jl"><code>KNITRO.Optimizer</code></a></li><li>The full list of optimizer options can be found in the <a href="https://www.artelys.com/docs/knitro//3_referenceManual/callableLibraryAPI.html">KNITRO Documentation</a></li></ul><h4 id="Juniper.jl-(MathOptInterface)"><a class="docs-heading-anchor" href="#Juniper.jl-(MathOptInterface)">Juniper.jl (MathOptInterface)</a><a id="Juniper.jl-(MathOptInterface)-1"></a><a class="docs-heading-anchor-permalink" href="#Juniper.jl-(MathOptInterface)" title="Permalink"></a></h4><ul><li><a href="https://github.com/lanl-ansi/Juniper.jl"><code>Juniper.Optimizer</code></a></li><li>Juniper requires a nonlinear optimizer to be set via the <code>nl_solver</code> option, which must be a MathOptInterface-based optimizer. See the <a href="https://github.com/lanl-ansi/Juniper.jl">Juniper documentation</a> for more detail.</li></ul><pre><code class="language-julia hljs">using Optimization, OptimizationMOI, Juniper, Ipopt
rosenbrock(x, p) = (p[1] - x[1])^2 + p[2] * (x[2] - x[1]^2)^2
x0 = zeros(2)
_p = [1.0, 100.0]

f = OptimizationFunction(rosenbrock, Optimization.AutoForwardDiff())
prob = Optimization.OptimizationProblem(f, x0, _p)

opt = OptimizationMOI.MOI.OptimizerWithAttributes(Juniper.Optimizer,
    &quot;nl_solver&quot; =&gt; OptimizationMOI.MOI.OptimizerWithAttributes(Ipopt.Optimizer,
        &quot;print_level&quot; =&gt; 0))
sol = solve(prob, opt)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">retcode: Success
u: 2-element Vector{Float64}:
 0.9999999999999899
 0.9999999999999792</code></pre><h4 id="Using-Integer-Constraints"><a class="docs-heading-anchor" href="#Using-Integer-Constraints">Using Integer Constraints</a><a id="Using-Integer-Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Integer-Constraints" title="Permalink"></a></h4><p>The following shows how to use integer linear programming within <code>Optimization</code>. We will solve the classical Knapsack Problem using <code>Juniper.jl</code>.</p><ul><li><p><a href="https://github.com/lanl-ansi/Juniper.jl"><code>Juniper.Optimizer</code></a></p></li><li><p>Juniper requires a nonlinear optimizer to be set via the <code>nl_solver</code> option, which must be a MathOptInterface-based optimizer. See the <a href="https://github.com/lanl-ansi/Juniper.jl">Juniper documentation</a> for more detail.</p></li><li><p>The integer domain is inferred based on the bounds of the variable:</p><ul><li>Setting the lower bound to zero and the upper bound to one corresponds to <code>MOI.ZeroOne()</code> or a binary decision variable</li><li>Providing other or no bounds corresponds to <code>MOI.Integer()</code></li></ul></li></ul><pre><code class="language-julia hljs">v = [1.0, 2.0, 4.0, 3.0]
w = [5.0, 4.0, 3.0, 2.0]
W = 4.0
u0 = [0.0, 0.0, 0.0, 1.0]

optfun = OptimizationFunction((u, p) -&gt; -v&#39;u, cons = (res, u, p) -&gt; res .= w&#39;u,
    Optimization.AutoForwardDiff())

optprob = OptimizationProblem(optfun, u0; lb = zero.(u0), ub = one.(u0),
    int = ones(Bool, length(u0)),
    lcons = [-Inf;], ucons = [W;])

nl_solver = OptimizationMOI.MOI.OptimizerWithAttributes(Ipopt.Optimizer,
    &quot;print_level&quot; =&gt; 0)
minlp_solver = OptimizationMOI.MOI.OptimizerWithAttributes(Juniper.Optimizer,
    &quot;nl_solver&quot; =&gt; nl_solver)

res = solve(optprob, minlp_solver)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">retcode: Success
u: 4-element Vector{Float64}:
 0.0
 0.0
 1.0
 0.0</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../gcmaes/">« GCMAES.jl</a><a class="docs-footer-nextpage" href="../metaheuristics/">Metaheuristics.jl »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Wednesday 27 March 2024 03:51">Wednesday 27 March 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
