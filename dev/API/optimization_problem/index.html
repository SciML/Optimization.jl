<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Defining OptimizationProblems · Optimization.jl</title><meta name="title" content="Defining OptimizationProblems · Optimization.jl"/><meta property="og:title" content="Defining OptimizationProblems · Optimization.jl"/><meta property="twitter:title" content="Defining OptimizationProblems · Optimization.jl"/><meta name="description" content="Documentation for Optimization.jl."/><meta property="og:description" content="Documentation for Optimization.jl."/><meta property="twitter:description" content="Documentation for Optimization.jl."/><meta property="og:url" content="https://docs.sciml.ai/Optimization/stable/API/optimization_problem/"/><meta property="twitter:url" content="https://docs.sciml.ai/Optimization/stable/API/optimization_problem/"/><link rel="canonical" href="https://docs.sciml.ai/Optimization/stable/API/optimization_problem/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="Optimization.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Optimization.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Optimization.jl: A Unified Optimization Package</a></li><li><a class="tocitem" href="../../getting_started/">Getting Started with Optimization.jl</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/certification/">Using SymbolicAnalysis.jl for convexity certificates</a></li><li><a class="tocitem" href="../../tutorials/constraints/">Using Equality and Inequality Constraints</a></li><li><a class="tocitem" href="../../tutorials/ensemble/">Multistart optimization with EnsembleProblem</a></li><li><a class="tocitem" href="../../tutorials/linearandinteger/">Linear and Integer Optimization Problems</a></li><li><a class="tocitem" href="../../tutorials/minibatch/">Data Iterators and Minibatching</a></li><li><a class="tocitem" href="../../tutorials/remakecomposition/">Creating polyalgorithms by chaining solvers using <code>remake</code></a></li><li><a class="tocitem" href="../../tutorials/symbolic/">Symbolic Problem Building with ModelingToolkit</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/rosenbrock/">Solving the Rosenbrock Problem in &gt;10 Ways</a></li></ul></li><li><span class="tocitem">Basics</span><ul><li class="is-active"><a class="tocitem" href>Defining OptimizationProblems</a></li><li><a class="tocitem" href="../optimization_function/">OptimizationFunction</a></li><li><a class="tocitem" href="../ad/">Automatic Differentiation Construction Choice Recommendations</a></li><li><a class="tocitem" href="../solve/">Common Solver Options (Solve Keyword Arguments)</a></li><li><a class="tocitem" href="../optimization_solution/">Optimization Solutions</a></li><li><a class="tocitem" href="../optimization_state/">OptimizationState</a></li><li><a class="tocitem" href="../optimization_stats/">OptimizationStats</a></li><li><a class="tocitem" href="../modelingtoolkit/">ModelingToolkit Integration</a></li><li><a class="tocitem" href="../FAQ/">Frequently Asked Questions</a></li></ul></li><li><span class="tocitem">Optimizer Packages</span><ul><li><a class="tocitem" href="../../optimization_packages/blackboxoptim/">BlackBoxOptim.jl</a></li><li><a class="tocitem" href="../../optimization_packages/cmaevolutionstrategy/">CMAEvolutionStrategy.jl</a></li><li><a class="tocitem" href="../../optimization_packages/evolutionary/">Evolutionary.jl</a></li><li><a class="tocitem" href="../../optimization_packages/gcmaes/">GCMAES.jl</a></li><li><a class="tocitem" href="../../optimization_packages/manopt/">Manopt.jl</a></li><li><a class="tocitem" href="../../optimization_packages/mathoptinterface/">MathOptInterface.jl</a></li><li><a class="tocitem" href="../../optimization_packages/metaheuristics/">Metaheuristics.jl</a></li><li><a class="tocitem" href="../../optimization_packages/multistartoptimization/">MultistartOptimization.jl</a></li><li><a class="tocitem" href="../../optimization_packages/nlopt/">NLopt.jl</a></li><li><a class="tocitem" href="../../optimization_packages/nlpmodels/">NLPModels.jl</a></li><li><a class="tocitem" href="../../optimization_packages/nomad/">NOMAD.jl</a></li><li><a class="tocitem" href="../../optimization_packages/optim/">Optim.jl</a></li><li><a class="tocitem" href="../../optimization_packages/optimisers/">Optimisers.jl</a></li><li><a class="tocitem" href="../../optimization_packages/optimization/">Optimization.jl</a></li><li><a class="tocitem" href="../../optimization_packages/polyopt/">Polyalgorithms.jl</a></li><li><a class="tocitem" href="../../optimization_packages/prima/">PRIMA.jl</a></li><li><a class="tocitem" href="../../optimization_packages/quaddirect/">QuadDIRECT.jl</a></li><li><a class="tocitem" href="../../optimization_packages/speedmapping/">SpeedMapping.jl</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Basics</a></li><li class="is-active"><a href>Defining OptimizationProblems</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Defining OptimizationProblems</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/SciML/Optimization.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/SciML/Optimization.jl/blob/master/docs/src/API/optimization_problem.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Defining-OptimizationProblems"><a class="docs-heading-anchor" href="#Defining-OptimizationProblems">Defining OptimizationProblems</a><a id="Defining-OptimizationProblems-1"></a><a class="docs-heading-anchor-permalink" href="#Defining-OptimizationProblems" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.OptimizationProblem" href="#SciMLBase.OptimizationProblem"><code>SciMLBase.OptimizationProblem</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Defines an optimization problem. Documentation Page: <a href="https://docs.sciml.ai/Optimization/stable/API/optimization_problem/">https://docs.sciml.ai/Optimization/stable/API/optimization_problem/</a></p><p><strong>Mathematical Specification of an Optimization Problem</strong></p><p>To define an optimization problem, you need the objective function <span>$f$</span> which is minimized over the domain of <span>$u$</span>, the collection of optimization variables:</p><p class="math-container">\[min_u f(u,p)\]</p><p><span>$u₀$</span> is an initial guess for the minimizer. <code>f</code> should be specified as <code>f(u,p)</code> and <code>u₀</code> should be an <code>AbstractArray</code> whose geometry matches the desired geometry of <code>u</code>. Note that we are not limited to vectors for <code>u₀</code>; one is allowed to provide <code>u₀</code> as arbitrary matrices / higher-dimension tensors as well.</p><p><strong>Problem Type</strong></p><p><strong>Constructors</strong></p><pre><code class="language-julia hljs">OptimizationProblem{iip}(f, u0, p = SciMLBase.NullParameters(),;
                        lb = nothing,
                        ub = nothing,
                        lcons = nothing,
                        ucons = nothing,
                        sense = nothing,
                        kwargs...)</code></pre><p><code>isinplace</code> optionally sets whether the function is in-place or not. This is determined automatically, but not inferred. Note that for OptimizationProblem, in-place refers to the objective&#39;s derivative functions, the constraint function and its derivatives. <code>OptimizationProblem</code> currently only supports in-place.</p><p>Parameters <code>p</code> are optional, and if not given, then a <code>NullParameters()</code> singleton will be used, which will throw nice errors if you try to index non-existent parameters.</p><p><code>lb</code> and <code>ub</code> are the upper and lower bounds for box constraints on the optimization variables. They should be an <code>AbstractArray</code> matching the geometry of <code>u</code>, where <code>(lb[i],ub[i])</code> is the box constraint (lower and upper bounds) for <code>u[i]</code>.</p><p><code>lcons</code> and <code>ucons</code> are the upper and lower bounds in case of inequality constraints on the optimization and if they are set to be equal then it represents an equality constraint. They should be an <code>AbstractArray</code>, where <code>(lcons[i],ucons[i])</code> are the lower and upper bounds for <code>cons[i]</code>.</p><p>The <code>f</code> in the <code>OptimizationProblem</code> should typically be an instance of <a href="https://docs.sciml.ai/Optimization/stable/API/optimization_function/#optfunction"><code>OptimizationFunction</code></a> to specify the objective function and its derivatives either by passing predefined functions for them or automatically generated using the <a href="https://github.com/SciML/ADTypes.jl">ADType</a>.</p><p>If <code>f</code> is a standard Julia function, it is automatically transformed into an <code>OptimizationFunction</code> with <code>NoAD()</code>, meaning the derivative functions are not automatically generated.</p><p>Any extra keyword arguments are captured to be sent to the optimizers.</p><p><strong>Fields</strong></p><ul><li><code>f</code>: the function in the problem.</li><li><code>u0</code>: the initial guess for the optimization variables.</li><li><code>p</code>: Either the constant parameters or fixed data (full batch) used in the objective or a <a href="https://github.com/JuliaML/MLUtils.jl">MLUtils</a> <a href="https://juliaml.github.io/MLUtils.jl/stable/api/#MLUtils.DataLoader"><code>DataLoader</code></a> for minibatching with stochastic optimization solvers. Defaults to <code>NullParameters</code>.</li><li><code>lb</code>: the lower bounds for the optimization variables <code>u</code>.</li><li><code>ub</code>: the upper bounds for the optimization variables <code>u</code>.</li><li><code>int</code>: integrality indicator for <code>u</code>. If <code>int[i] == true</code>, then <code>u[i]</code> is an integer variable.   Defaults to <code>nothing</code>, implying no integrality constraints.</li><li><code>lcons</code>: the vector of lower bounds for the constraints passed to <a href="https://docs.sciml.ai/Optimization/stable/API/optimization_function/#optfunction">OptimizationFunction</a>.   Defaults to <code>nothing</code>, implying no lower bounds for the constraints (i.e. the constraint bound is <code>-Inf</code>)</li><li><code>ucons</code>: the vector of upper bounds for the constraints passed to <a href="https://docs.sciml.ai/Optimization/stable/API/optimization_function/#optfunction"><code>OptimizationFunction</code></a>.   Defaults to <code>nothing</code>, implying no upper bounds for the constraints (i.e. the constraint bound is <code>Inf</code>)</li><li><code>sense</code>: the objective sense, can take <code>MaxSense</code> or <code>MinSense</code> from Optimization.jl.</li><li><code>kwargs</code>: the keyword arguments passed on to the solvers.</li></ul><p><strong>Inequality and Equality Constraints</strong></p><p>Both inequality and equality constraints are defined by the <code>f.cons</code> function in the <a href="https://docs.sciml.ai/Optimization/stable/API/optimization_function/#optfunction"><code>OptimizationFunction</code></a> description of the problem structure. This <code>f.cons</code> is given as a function <code>f.cons(u,p)</code> which computes the value of the constraints at <code>u</code>. For example, take <code>f.cons(u,p) = u[1] - u[2]</code>. With these definitions, <code>lcons</code> and <code>ucons</code> define the bounds on the constraint that the solvers try to satisfy. If <code>lcons</code> and <code>ucons</code> are <code>nothing</code>, then there are no constraints bounds, meaning that the constraint is satisfied when <code>-Inf &lt; f.cons &lt; Inf</code> (which of course is always!). If <code>lcons[i] = ucons[i] = 0</code>, then the constraint is satisfied when <code>f.cons(u,p)[i] = 0</code>, and so this implies the equality constraint <code>u[1] = u[2]</code>. If <code>lcons[i] = ucons[i] = a</code>, then <span>$u[1] - u[2] = a$</span> is the equality constraint.</p><p>Inequality constraints are then given by making <code>lcons[i] != ucons[i]</code>. For example, <code>lcons[i] = -Inf</code> and <code>ucons[i] = 0</code> would imply the inequality constraint <span>$u[1] &lt;= u[2]$</span> since any <code>f.cons[i] &lt;= 0</code> satisfies the constraint. Similarly, <code>lcons[i] = -1</code> and <code>ucons[i] = 1</code> would imply that <code>-1 &lt;= f.cons[i] &lt;= 1</code> is required or <span>$-1 &lt;= u[1] - u[2] &lt;= 1$</span>.</p><p>Note that these vectors must be sized to match the number of constraints, with one set of conditions for each constraint.</p><p><strong>Data handling</strong></p><p>As described above the second argument of the objective definition can take a full batch or a <a href="https://juliaml.github.io/MLUtils.jl/stable/api/#MLUtils.DataLoader"><code>DataLoader</code></a> object for mini-batching which is useful for stochastic optimization solvers. Thus the data either as an Array or a <code>DataLoader</code> object should be passed as the third argument of the <code>OptimizationProblem</code> constructor. For an example of how to use this data handling, see the <code>Sophia</code> example in the <a href="https://docs.sciml.ai/Optimization/dev/optimization_packages/optimization">Optimization.jl documentation</a> or the <a href="https://docs.sciml.ai/Optimization/dev/tutorials/minibatch/">mini-batching tutorial</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/SciMLBase.jl/blob/v2.72.2/src/problems/optimization_problems.jl#L3">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../examples/rosenbrock/">« Solving the Rosenbrock Problem in &gt;10 Ways</a><a class="docs-footer-nextpage" href="../optimization_function/">OptimizationFunction »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Thursday 6 February 2025 00:13">Thursday 6 February 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
